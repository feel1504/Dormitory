<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.3.2/css/bootstrap.css" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.js"></script>
</head>
<style>
    .mi{
        margin-right:5px;
    }
    .ti{
        margin-top:-20px;
    }
    .xuan:hover{
        background-color:grey;
        color:white;
    }
    .fenge{
    	width:100%;
    	height:2px;
    	background-color:black;
    }
    body{
        height:900px;
        background:url('/static/2.jpg') no-repeat;
        background-size:100% 100%;
    }
</style>
<body>
    <div>
        <div class="row">
            <div class="col-xs-12">
                <nav class="navbar navbar-default">
                  <div class="container-fluid">
                    <div class="navbar-header">
                      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                      </button>
                      <a class="navbar-brand" href="#">学生宿舍管理系统后台界面</a>
                    </div>
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                      <form class="navbar-form navbar-left" action="/search_data/" method="post" role="search">
						  {% csrf_token %}
                        <div class="form-group">
                          <input type="text" class="form-control" name="content" placeholder="请输入搜索内容">
                        </div>
                        <button type="submit" class="btn btn-default">查询</button>
                      </form>
                      <ul class="nav navbar-nav navbar-right">
                        <li><a href="#">用户名:{{user}}</a></li>
                        <li><a href="/login/">注销</a></li>       <!--实现页面注销，回到登录界面-->
                      </ul>
                    </div><!-- /.navbar-collapse -->
                  </div><!-- /.container-fluid -->
                </nav>
            </div>
        </div>
    </div>
	<div><!--class="container" 表示居中-->
    <div class="row">
        <div class="col-xs-12 col-sm-3">
            <ul class="list-group">
              <a href="/student/1"><li class="list-group-item xuan">学生信息表</li></a>
              <a href="/emp/1"><li class="list-group-item xuan">宿舍管理员信息表</li></a>
              <a href="/dor/1"><li class="list-group-item xuan">宿舍信息表</li></a>
              <a href="/pay/1"><li class="list-group-item xuan">宿舍缴费信息表</li></a>
              <a href="/repair/1"><li class="list-group-item xuan">宿舍报修表</li></a>
            </ul>
        </div>
        <div class="col-xs-12 col-sm-9">
            <div class="panel panel-default mi">
				<div class="panel-heading">
					<h2 align="center">宿舍信息管理</h2>
					<button type="button" class="btn btn-success btn-lg" data-toggle="modal" data-target="#myModal">
					 添加
					</button>
					<!-- Modal -->
					<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					  <div class="modal-dialog">
						<div class="modal-content">
						  <div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">添加宿舍信息</h4>
						  </div>
							<form action="/add_dor/" method="post">
								  {% csrf_token %}
								  <div class="modal-body" align="center">
									<p>宿舍全号：<input type="text" name="sno"/> </p>
									<p>楼号：<input type="text" name="name"/> </p>
									<p>区号：<input type="text" name="sex"/>></p>
									<p>层号：<input type="text" name="age"/> </p>
									<p>宿舍号：<input type="text" name="dept"/> </p>
									<p>最大入住人数：<input type="text" name="major"></p>
									<p>已入住人数：<input type="text" name="grade"/> </p>
									<p>联系电话：<input type="text" name="type"></p>
								  </div>
								  <div class="modal-footer">
										<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
										<button type="submit" class="btn btn-primary">提交</button>
								  </div>
							   </form>
						</div>
					  </div>
				    </div>

                    <nav class="pull-right ti">
					  <ul class="pagination">
						<li>
						  <a href="#" aria-label="Previous">
							<span aria-hidden="true">&laquo;</span>
						  </a>
						</li>
						<li><a href="/dor/1">1</a></li>
						<li><a href="/dor/2">2</a></li>
						<li><a href="/dor/3">3</a></li>
						<li><a href="/dor/4">4</a></li>
						<li><a href="/dor/5">5</a></li>
						<li>
						  <a href="#" aria-label="Next">
							<span aria-hidden="true">&raquo;</span>
						  </a>
						</li>
					  </ul>
					</nav>
                </div>

                <div class="panel-body">
					<table class="table table-hover">
						<tr>
							<td>宿舍全号</td>
							<td>楼号</td>
							<td>区号</td>
							<td>层号</td>
							<td>宿舍号</td>
						</tr>
						{% for stu in all %}
					    <tr>
							<td>{{stu.sushe_num}}</td>
							<td>{{stu.louhao}}</td>
							<td>{{stu.quhao}}</td>
							<td>{{stu.cenghao}}</td>
							<td>{{stu.sushehao}}</td>
					    </tr>
							{% endfor %}
					</table>
					<br>
					<div class="fenge"></div>
					<br>
					<br>
				<div class="panel-body">
					<table class="table table-hover">
						<tr>
							<td>最大入住人数</td>
							<td>已入住人数</td>
							<td>联系电话</td>
							<td>操作</td>
						</tr>
							{% for stu in all %}
					    <tr>
							<td>{{stu.max_occupancy}}</td>
							<td>{{stu.occupancy}}</td>
							<td>{{stu.telephone}}</td>
							<td>
								 <button type="button" class="btn btn-success " data-toggle="modal" data-target="#myModal{{stu.id}}">
									修改
								 </button>
							  <!-- Modal -->
								<div class="modal fade" id="myModal{{stu.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
								  <div class="modal-dialog">
									<div class="modal-content">
									  <div class="modal-header">
										<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
										<h4 class="modal-title" id="myModalLabel">添加学生信息</h4>
									  </div>
										<form align="center" action="/dor_stu/{{stu.id}}/" method="post">
											{% csrf_token %}
										  <div class="modal-body">
											<p>宿舍全号：<input type="text" name="sno" value="{{stu.sushe_num}}"></p>
											<p>楼号：<input type="text" name="name" value="{{stu.louhao}}"></p>
											<p>区号：<input type="text" name="sex" value="{{stu.quhao}}"></p>
											<p>层号：<input type="text" name="age" value="{{stu.cenghao}}"></p>
											<p>宿舍号：<input type="text" name="dept" value="{{stu.sushehao}}"></p>
											<p>最大入住人数：<input type="text" name="major" value="{{stu.max_occupancy}}"></p>
											<p>已入住人数：<input type="text" name="grade" value="{{stu.occupancy}}"></p>
											<p>联系方式：<input type="text" name="type" value="{{stu.telephone}}"></p>
										  </div>
										  <div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
											<button type="submit" class="btn btn-primary">提交</button>
										  </div>
										</form>
									</div>
								  </div>
								</div>
								<a href="/del_dor/{{stu.id}}"><button class="btn btn-danger">删除</button></a>
                     		</td>
						</tr>
							{% endfor %}
					</table>
				</div>
   		    </div>
		</div>
	</div>
</div>
	</div>
</body>
</html>